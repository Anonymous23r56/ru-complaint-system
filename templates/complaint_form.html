<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Complaint Form - Redeemer's University</title>
  <link rel="stylesheet" href="static/css/style.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
  <div class="container mt-5 mb-5">
    <div class="text-center mb-4">
      <img src="static/redeemers-university-logo-transparent.png" alt="Redeemer's University Logo" width="80" id="run-logo" />
      <h2 class="mt-2">Redeemer's University</h2>
      <p class="text-muted motto">"Running with a Vision"</p>
    </div>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ 'danger' if category == 'danger' else 'warning' if category == 'warning' else 'success' }} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <div class="card shadow p-4">
      <h4 class="mb-3">Student Complaint / Repair Form</h4>
      <form action="/" method="POST" enctype="multipart/form-data">
        <div class="row mb-3">
          <div class="col-md-6">
            <label for="fullname" class="form-label">Full Name</label>
            <input type="text" class="form-control" id="fullname" name="fullname" 
                   value="{{ fullname or '' }}" pattern="[A-Za-z ]{3,50}" 
                   title="3-50 letters and spaces only" required />
          </div>
          <div class="col-md-6">
            <label for="matric" class="form-label">Matric Number</label>
            <input type="text" class="form-control" id="matric" name="matric" 
                   value="{{ matric or '' }}" pattern="RUN/[A-Za-z]{3}/\d{2}/\d{4,6}" 
                   placeholder="RUN/XXX/YY/12345" title="Format: RUN/XXX/YY/12345" required />
          </div>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <label for="phone" class="form-label">Phone Number</label>
            <input type="tel" class="form-control" id="phone" name="phone" 
                   value="{{ phone or '' }}" pattern="\d{11}" 
                   placeholder="08012345678" title="Exactly 11 digits" required />
          </div>
          <div class="col-md-6">
            <label for="email" class="form-label">Email Address</label>
            <input type="email" class="form-control" id="email" name="email" 
                   value="{{ email or '' }}" required />
          </div>
        </div>

        <div class="mb-3">
          <label for="location" class="form-label">Hostel / Classroom / Location</label>
          <input type="text" class="form-control" id="location" name="location" 
                 value="{{ location or '' }}" minlength="3" maxlength="100" required />
        </div>

        <div class="mb-3">
          <label for="description" class="form-label">Description of the Repair Issue</label>
          <textarea class="form-control" id="description" name="description" rows="4" 
                    minlength="5" maxlength="500" required>{{ description or '' }}</textarea>
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <label for="incident_date" class="form-label">Date of Incident</label>
            <input type="date" class="form-control" id="incident_date" name="incident_date" 
                   value="{{ incident_date or '' }}" max="{{ max_date }}" required />
          </div>
          <div class="col-md-6">
            <label for="attachments" class="form-label">Upload Photos/Documents</label>
            <input type="file" class="form-control" id="attachments" name="attachments" 
                   accept="image/*,.pdf,.doc,.docx" multiple />
            <div class="form-text">You can select multiple files. Supported: Images, PDF, Word docs</div>
          </div>
        </div>

        <button type="submit" class="btn btn-primary w-100">Submit Complaint</button>
      </form>
    </div>
    <footer class="text-center mt-5 mb-3 text-muted small">
      Courtesy of <strong>RUNSA 2025/2026</strong>
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>